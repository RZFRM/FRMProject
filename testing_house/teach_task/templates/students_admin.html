<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Layui</title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link rel="stylesheet" href="../../static/res/layui/css/layui.css" media="all">
    <link rel="stylesheet" href="../../static/res/trainTask/static/css/school-admin.css" media="all">
    <link rel="stylesheet" href="../../static/res/trainTask/static/css/teaching.css">
    <!-- 注意：如果你直接复制所有代码到本地，上述css路径需要改成你本地的 -->
    <style>
        .nav-button {
            width: 12px;
            height: 21px;
        }

        button.nav-button {
            width: 77px;
            height: 30px;
            color: white;
            background-color: #009688;
            font-size: 14px;
            border: 0;
            border-radius: 6.9px;
        }

        button.nav-button:hover {
            cursor: pointer
        }

        .nav-1 {
            display: flex;
            justify-content: space-between;
            background-color: #F2F2F2;
            width: 100%;
            height: 50px;
            line-height: 50px;
        }

        .nav-3 {
            margin-right: 11px;
        }

        .download-li-1 {
            display: flex;
            justify-content: space-between;
        }

        .download-li-1 > span {
            overflow: hidden;
            white-space: nowrap;
            text-overflow: ellipsis
        }

        .tt {
            width: 120px;
        }
    </style>
</head>
<body style="width: 99%">
<div class="layui-col-train-teach">
    <div class="layui-card">
        <div class="layui-card-header" style="width: 98%"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;机器人实训教学 &nbsp;>&nbsp;
            学生管理
        </div>
    </div>
</div>
<div class="nav-1">
    <div class="nav-2" style="margin-left: 10px">
        <button class="nav-button" id="add1">新增</button>
        <button class="nav-button" id="add2">修改</button>
        <button class="nav-button" id="dele">删除</button>
        <button class="nav-button">批量导入</button>
        <button class="nav-button">批量导出</button>
        <select class="tt" name="Province" lay-verify="Province" lay-filter="Province" id="ddlProvinceId">
            <option value="" style="color: #f2f2f2">选择专业</option>

        </select>

        <select class="tt" lay-verify="" id="">
            <option value="" style="color: #f2f2f2">选择班级</option>

        </select>


        </select>
    </div>
    <div class="nav-3">
        <input type="text" id="demoReload" placeholder="按名称搜索">
        <button type="button" id="major_btn"  class="nav-button">搜索</button>
    </div>
</div>

<div class="layui-card-body" style="width: 98%">
    <table class="layui-hide" id="table_user" lay-filter="user"></table>
</div>

<script src="../../static/res/layui/layui.js" charset="utf-8"></script>
<!-- 注意：如果你直接复制所有代码到本地，上述js路径需要改成你本地的 -->
<script>
    layui.use(['table', 'layedit', 'laydate', 'jquery', 'form'], function () {
        var table = layui.table
            , layer = layui.layer
            , layedit = layui.layedit
            , $ = layui.jquery
            , laydate = layui.laydate,
            form = layui.form
        //方法级渲染
        table.render({
            elem: '#table_user'
            , url: '/teach_task/student'
            , toolbar: 'school-head'
            , max_height: 1000
            , type: "get"
            , cols: [[
                {checkbox: true, fixed: true}
                , {field: 'a', align: "center", title: '序号', width: "6%", type: 'numbers'}
                , {field: 'a', align: "center", title: '学号', width: "9%"}
                , {field: 'b', align: "center", title: '姓名', width: "9%"}
                , {field: 'c', align: "center", title: '专业', width: "8%"}
                , {field: 'd', align: "center", title: '班级', width: "10%"}
                , {field: 'e', align: "center", title: '手机', width: "12%"}
                , {field: 'f', align: "center", title: '注册时间', width: "11%"}
                , {field: 'g', align: "center", title: '登陆次数', width: "8%"}
                , {field: 'h', align: "center", title: '最近登录时间', width: "11%"}
                , {field: 'i', align: "center", title: '实训报告', width: "12%"}
            ]]
            , page: true
        });
        //添加弹窗
        $("#add1").on('click', function () {
            //console.log("data");
            //页面层
            layer.open({
                title: '教务管理',
                type: 2,
                area: ['637px', '518px'],//宽高
                content: '/teach_task/student_update'
            });
        });
        //修改弹窗页面
        $('#add2').on('click', function () {
            layer.open({
                title: '教务管理',
                type: 2,
                area: ['637px', '518px'],
                counter: '/teach_task/student_modify'
            })
        })
        //删除
        $('#dele').on('click',function(){
            console.log("aa")
        })
        //获取专业
        $(function () {
            $.ajax({
                url: '/teach_task/student_down',
                type: 'get',
                success: function (res) {
                    console.log(res)
                    var date = res.result;
                    console.log(date)
                    for (var i = 0; i < date.length; i++) {
                        // console.log(date[i]);
                        $("#ddlProvinceId").append(`<option value="${date[i]}">${date[i]}</option>`)
                    }
                    layui.form.render("select", "component-form-group")
                }
            })
        })
        //获取班级
        $('#ddlProvinceId').blur(function () {
            var val = $('#ddlProvinceId').val()
            console.log(val)
            $.ajax({
                url: '/teach_task/student_down',
                type: 'post',
                data: {
                    'major_name': val
                },
                success: function (res) {
                    console.log(res)
                }
            })
        });
        //搜索
        $('#major_btn').on('click', function () {
            var val = $('#demoReload').val()
            console.log(val)
            table.reload('table_user', {
                url: '/teach_task/student_delete_search'
                , method: 'post'
                , where: {
                    "admin_name": val,
                } //设定异步数据接口的额外参数

            });
        })
    });
</script>
</body>
