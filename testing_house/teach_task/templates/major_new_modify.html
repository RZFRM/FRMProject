<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>专业管理/新增/修改</title>
    <link rel="stylesheet" href="../../static/layuiadmin/layui/css/layui.css" media="all">
    <link rel="stylesheet" href="../../static/res/static/css/purchasing.css">
    <style>
        .forn {
            width: 350px;
            margin: 0 auto;
        }

        ul {
            position: absolute;
            top: 95px;
            left: 17px;
        }
        .atitle>span{
            margin-left: 5px;
            width:61px;
            height:15px;
            font-size:14px;
            font-family:Microsoft YaHei;
            font-weight:400;
            color:rgba(51,51,51,1);
        }
        .atitle>button {
            width:27px;
            height:25px;
            border: none;
            background:rgba(248,248,248,1);
            margin-left: 600px;
        }
        .remind {
            width:356px;
            height:39px;
            font-size:14px;
            font-family:Microsoft YaHei;
            font-weight:400;
            color:rgba(255,84,0,1);
            margin: 30px 0 0 42px;
        }
        .remind>p:nth-child(2) {
            color: #0C0C0C;
            margin: 8px;
        }
        .remind>p:nth-child(3) {
            color: #0C0C0C;
            margin: 8px;
        }
        .btn {
            width: 105px;
            height: 39px;
            background: rgba(55, 38, 89, 1);
            border-radius: 4px;
            font-size: 14px;
            text-align: center;
            line-height: 39px;
            border: 0;
            color: #fff;
            cursor: pointer;
            position: absolute;
            left: 44%;
            bottom: 32px;
        }
    </style>
</head>
<body style="background-color: #FFFFFF">
<div class="Popout">

    <div>
        <p>新增/修改</p>
    </div>
    <div style="height: 425px;overflow: auto;padding-top:25px">
        <form class="layui-form forn" action="" lay-filter="component-form-group">
            <div class="layui-form-item">
                <lable class="layui-form-label" style="padding:5px 15px;">专业名称：</lable>
                <div class="layui-input-block" style="min-height: 30px;">
                    <input id="major_nane" type="text" autocomplete="off" class="layui-input" placeholder="请输入专业名称"
                           style="min-height: 30px;line-height: 20px; height: 20px;">
                </div>
            </div>
            <div class="layui-form-item">
                <lable class="layui-form-label" style="padding:5px 15px;">专业代码：</lable>
                <div class="layui-input-block" style="min-height: 30px;">
                    <input id="major_code" type="text" autocomplete="off" class="layui-input" placeholder="请输入专业代码"
                           style="min-height: 30px;line-height: 20px; height: 20px;">
                </div>
            </div>
            <div class="layui-form-item">
                <label class="layui-form-label" style="padding:5px 15px 5px 10px;;width: 85px;"><span
                        class="xing"></span>是否有效：</label>
                <div class="layui-input-block" style="min-height: 30px;">
                    <select id="major_tab" name="modules" lay-verify="required" lay-search="" style="width:100%;height: 30px;">
                        <option style="height: 32px" value="">请选择</option>
                        <option value="True">是</option>
                        <option value="False">否</option>
                    </select>
                </div>
            </div>
            <div class="remind">
                <p>提示：</p>
                <p>1.如专业下有开通的班级，不能设置为无效。</p>
                <p>2.专业下有班级不可删除。</p>
            </div>
            <button class="btn" id="major_btn" type="button" lay-submit="" lay-filter="major_btn">提交</button>

        </form>
    </div>
</div>
</div>
<script src="../../static/layuiadmin/layui/layui.js"></script>
<script>

    layui.use(['form', 'layedit', 'laydate', 'jquery'], function () {
        var form = layui.form
            , layer = layui.layer
            , layedit = layui.layedit
            , $ = layui.jquery
            , laydate = layui.laydate;
        //添加数据
        // form.on('submit(major_btn)',function(data){
        //      console.log(JSON.stringify(data))
        //     $.ajax({
        //         url:'/major',
        //         type:'post',
        //         data:{
        //             'major_name':$('#major_nane').val(),
        //             'major_code':$('#major_code').val(),
        //             'major_state':$('#major_tab').val()
        //         },
        //         success:function (res) {
        //             console.log(res)
        //         }
        //     })
        // })

        $(function(){
             return  old_user_name= $('#major_code').val()
        })
        $('#major_btn').on('click',function(){
            console.log(old_user_name)
             $.ajax({
                url:'/teach_task/major_updata',
                type:'post',
                data:{
                    'major_name':$('#major_nane').val(),
                    'major_code':$('#major_code').val(),
                    'major_state':$('#major_tab').val(),
                    'old_major_code':old_user_name
                },
                success:function (res) {
                    console.log(res.result)
                    console.log(res)
                   if(res.result=="fail"){
                       layer.msg(res.msg)
                   }else{
                       layer.msg(res.result)
                       setTimeout(function(){
                             window.parent.location.reload();
                       },1000)
                   }
                }
            })
        })
    });

</script>
</body>
</html>