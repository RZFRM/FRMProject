{% extends "base_iframe.html" %}
{% load staticfiles %}
{% block iframe_info %}
    <div class="layui-fluid">


          <div class="layui-fluid" id="LAY-component-grid-mobile">
                    <div class="layui-row layui-col-space18" >
                        <div class="layui-col-xs6 layui-col-md4">
                            <!-- 填充内容 -->
                            <div class="layui-card">
                                <div class="layui-card-body"></div>
                            </div>
                        </div>
                        <div class="layui-col-xs6 layui-col-md4">
                            <!-- 填充内容 -->
                            <div class="layui-card">
                                <div class="layui-card-body">

                                    <div>
                                        <h2 style="font-family: 黑体; margin-top: 48px; ">
                                            <center>{{ robot_name }}机器人：</center>
                                        </h2>
                                        <p></p>
                                        <h3>
                                            <center>有限期截止：2020年8月20日</center>
                                        </h3>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="layui-col-xs6 layui-col-md4">
                            <!-- 填充内容 -->
                            <div class="layui-card">
                                <div class="layui-card-body">


                                </div>
                            </div>
                        </div>
                        <div class="layui-col-xs6 layui-col-md12">
                            <!-- 填充内容 -->
                            <div class="layui-card">
                                <div class="layui-card-body">
                                    <div style="margin-left: 300px;">
                                        <img src="{% static 'robotInstall/flowPic_1.PNG' %}">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="layui-col-xs6 layui-col-md4">
                            <!-- 填充内容 -->
                            <div class="layui-card">
                                <div class="layui-card-body"></div>
                            </div>
                        </div>
                        <div class="layui-col-xs6 layui-col-md4">
                            <!-- 填充内容 -->
                            <div class="layui-card">
                                <div class="layui-card-body">
                                    <div>
                                        <img src="{%  static  'robotInstall/robotinstall_info.PNG' %}">
                                    </div>


                                </div>
                            </div>
                        </div>
                        <div class="layui-col-xs6 layui-col-md4">
                            <!-- 填充内容 -->
                            <div class="layui-card">
                                <div class="layui-card-body"></div>
                            </div>
                        </div>

{# TODO 下一页  #}




                    </div>
                </div>


                <div class="layui-card">
                    <div class="layui-card-header">创建任务：</div>
                    <form class="layui-form layui-card-body" method="post" action="">
                        {% csrf_token %}

                        {#                  <div class="layui-form-item">#}
                        {#                    <span class="layui-form-label" style="display: block; padding-left: 0px; width:120px; height: 15px; float: left;" >新任务名称:</span>#}
                        {#                    <div class="layui-input-block">#}
                        {#                      <input type="text" name="title" required  lay-verify="required" placeholder="请输入名称" autocomplete="off" class="layui-input" style="width: 500px;">#}
                        {#                    </div>#}
                        {#                  </div>#}


                        <!--              <div class="layui-form-item">
                                        <label class="layui-form-label">密码框</label>
                                        <div class="layui-input-inline">
                                          <input type="password" name="password" required lay-verify="required" placeholder="请输入密码" autocomplete="off" class="layui-input">
                                        </div>
                                        <div class="layui-form-mid layui-word-aux">辅助文字</div>
                                      </div>

                                      -->
                        {#                  <div class="layui-form-item">#}
                        <!--       <label class="layui-form-label">选择框</label>
                             <div class="layui-input-block">
                                <select name="city" lay-verify="required">
                                  <option value=""></option>
                                  <option value="0">北京</option>
                                  <option value="1">上海</option>
                                  <option value="2">广州</option>
                                  <option value="3">深圳</option>
                                  <option value="4">杭州</option>
                                </select>
                              </div>  -->
                        {#                  </div>#}
                        {#                  <div class="layui-form-item">#}
                        {#                    <span class="layui-form-label" style="display: block; padding-left: 0px; width:150px; height: 15px;">选择机器人类型:</span>#}
                        {#                    <div class="layui-input-block" >#}
                        {#                      <input  id="invoiceRPA2"  type="bu" name="chose_rpa" value="1"  title=发票验证机器人 >#}
                        {##}
                        {#                         <input  id="personalIncomeTaxRPA" class="layui-btn" type="button" name="chose_rpa" value="个税申报机器人"   >#}
                        {#                         <input  id="requisitionRPA" class="layui-btn" type="button" name="chose_rpa" value="请购机器人"   >#}
                        {#                         <input  id="invoiceRPA" class="layui-btn" type="button" name="chose_rpa" value="发票验证机器人"   >#}
                        {#                    </div>#}
                        {##}
                        {##}
                        {#                         <div class="layui-input-block">#}
                        {##}
                        {#                      </div>#}
                        {##}
                        {##}
                        {#                  </div>#}

                        <div class="layui-upload" id="test3"
                             style="padding-left: 50px; padding-bottom: 5px; display: none;">

                            <span> 数据获取方式：</span>

                            <button type="button" class="layui-btn">
                                <span id="upload_excel" class="layui-icon" onclick="upload_file(this)">&#xe67c;</span>上传表格文件
                            </button>

                        </div>

                        <div class="layui-upload" id="test2"
                             style="padding-left: 50px; padding-bottom: 5px; display: none;">
                            <span> 数据获取方式：</span>
                            <button type="button" class="layui-btn">
                                <span id="upload_excel" class="layui-icon" onclick="upload_file(this)">&#xe67c;</span>上传表格文件
                            </button>

                        </div>
                        <div class="layui-upload" id="test1"
                             style="padding-left: 50px; padding-bottom: 5px; display: none;">

                            <span> 数据获取方式：</span>
                            <button type="button" class="layui-btn" id="testAction">
                                <span id="upload_pic" name="testAction" class="layui-icon" onclick="upload_file(this)">&#xe67c;</span>本地图片
                            </button>
                            <button type="button" class="layui-btn">
                                <span id="upload_excel" class="layui-icon" onclick="upload_file(this)">&#xe67c;</span>上传图片
                            </button>

                            <button type="button" class="layui-btn">
                                <span id="upload_excel" class="layui-icon" onclick="upload_file(this)">&#xe67c;</span>上传表格
                            </button>

                        </div>

                        <div class="layui-form-item">

                            <label class="layui-form-label" style="margin-left: 10px;">客户地址：</label>


                            {% csrf_token %}

                            <button type="button" class="layui-btn" id="clientInfo" name="clientInfo"
                                    style="padding-left: 10px">
                                <i class="layui-icon">&#xe67c;</i>上传信息
                            </button>
                            <p style="margin-left: 40px;">请上传上传C:/ISRPA/logs/<span id="timess"></span>/ClientManHelper.log
                            </p>
                        </div>
                        {#                   文件上传 #}

                        {#                    <div class="layui-upload">#}
                        {#<button  type="button" class="layui-btn layui-btn-normal" id="testList"  >选择文件</button>#}
                        {#                 <div class="layui-upload-list">#}
                        {#                       <table class="layui-table">#}
                        {#                        <thead>#}
                        {#                        <th>文件名</th>#}
                        {#                        <th>大小</th>#}
                        {#                         <th>状态</th>#}
                        {#                        <th>操作</th>#}
                        {#                     </thead>#}
                        {#             <tbody id="demoList"></tbody>#}
                        {#                     </table>#}
                        {#                     </div>{% csrf_token %}#}
                        {#                        <button type="button" class="layui-btn" id="testListAction">开始上传</button>#}
                        {#                </div>#}


                        <div class="layui-form-item layui-form-text">
                            <label class="layui-form-label" style="margin-left: 35px;">备&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;注：</label>
                            <div class="layui-input-block">
                                <textarea name="desc" placeholder="请输入内容" class="layui-textarea"
                                          style="width: 500px;"></textarea>
                            </div>
                        </div>
                        <div class="layui-form-item">
                            <div class="layui-input-block">
                                <button class="layui-btn layui-btn-blue" lay-submit lay-filter="formDemo">立即提交</button>
                                <button type="reset" class="layui-btn layui-btn-primary">重置</button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>

        </div>
    </div>
    </div>
{% endblock %}
{% block script_info %}
    <script src="{% static "js/jquery.min.js" %}"></script>
    <script>

        $(function () {
            upload_file = function (id) {
                {#alert(123)#}
                console.log(id)
            }
            flag = 1
            $("#invoiceRPA").on("click", function () {
                if (flag === 1) {
                    document.getElementById('test1').style.display = 'block'
                    document.getElementById('test2').style.display = 'none'
                    document.getElementById('test3').style.display = 'none'
                    flag = 2
                } else {
                    document.getElementById('test1').style.display = 'none'
                    flag = 1
                }


            })
        })


        $(function () {
            upload_file = function (id) {
                {#alert(123)#}
                console.log(id)
            }
            flag = 1
            $("#personalIncomeTaxRPA").on("click", function () {
                if (flag === 1) {
                    document.getElementById('test3').style.display = 'block'
                    document.getElementById('test2').style.display = 'none'
                    document.getElementById('test1').style.display = 'none'
                    flag = 2
                } else {
                    document.getElementById('test3').style.display = 'none'
                    flag = 1
                }


            })
        })


        $(function () {
            upload_file = function (id) {
                {#alert(123)#}
                console.log(id)
            }
            flag = 1
            $("#requisitionRPA").on("click", function () {
                if (flag === 1) {
                    document.getElementById('test2').style.display = 'block'
                    document.getElementById('test1').style.display = 'none'
                    document.getElementById('test3').style.display = 'none'
                    flag = 2
                } else {
                    document.getElementById('test2').style.display = 'none'
                    flag = 1
                }


            })
        })


    </script>








    <script>


        layui.config({
            base: '{% static "/layuiadmin/" %}'
        }).extend({
            index: '/lib/index'
        }).use(['index', 'set']);
    </script>
    <script>
        layui.use('upload', function () {
            var upload = layui.upload,
                $ = layui.$;


            var uploadInst = upload.render({
                elem: '#clientInfo'
                , accept: 'file'
                , url: '/clientInfo/' //上传接口
                , field: "clientInfo"
                , acceptMime: 'log/plain'
                , data: {
                    'csrfmiddlewaretoken': function () {
                        return $(':input:first').val()
                    }
                }

                , done: function (res) {
                    //上传完毕回调
                }
                , error: function () {
                    //请求异常回调
                }
            });


            var uploadInst = upload.render({
                elem: '#test3'
                , accept: 'file'
                , url: '/personalIncomeTax/' //上传接口
                , field: "test3"
                , acceptMime: 'log/plain'
                , data: {
                    'csrfmiddlewaretoken': function () {
                        return $(':input:first').val()
                    }
                }

                , done: function (res) {
                    //上传完毕回调
                }
                , error: function () {
                    //请求异常回调
                }
            });


            var uploadInst = upload.render({
                elem: '#test2'
                , accept: 'file'
                , url: '/requisition/' //上传接口
                , field: "test2"
                , acceptMime: 'log/plain'
                , data: {
                    'csrfmiddlewaretoken': function () {
                        return $(':input:first').val()
                    }
                }

                , done: function (res) {
                    //上传完毕回调
                }
                , error: function () {
                    //请求异常回调
                }
            });


            //执行实例 发票验证
            var uploadInst = upload.render({
                elem: '#test1' //绑定元素
                , accept: 'file'
                , url: '/upload/' //上传接口
                , field: "test1"
                , acceptMime: 'log/plain'
                , data: {
                    'csrfmiddlewaretoken': function () {
                        return $(':input:first').val()
                    }
                }

                , done: function (res) {
                    //上传完毕回调
                }
                , error: function () {
                    //请求异常回调
                }
            });


            // 多个文件上传
            {#upload.render({#}
            {#elem: '#testAction'#}
            {#,url: '/upload/'#}
            {#,multiple: true#}
            {#,exts: 'png' //只允许上传压缩文件#}
            {#,before: function(obj){#}
            {#  //预读本地文件示例，不支持ie8#}
            {#  obj.preview(function(index, file, result){#}
            {#    $('#demo2').append('<img src="'+ result +'" alt="'+ file.name +'" class="layui-upload-img">')#}
            {#  });#}
            //}
            {#   ,data: {#}
            {#        'csrfmiddlewaretoken': function () {#}
            {#            return $(':input:first').val()#}
            {#        }#}
            {#    }#}
            {#  ,done: function(res){#}
            {#    //上传完毕#}
            {#          console.log(res)#}
            {#  }#}
            {##}
            //});


        })
        //执行示例


        // 文件上传
        {#var demoListView = $('#demoList')#}
        {#        , uploadListIns = upload.render({#}
        {#        elem: '#test1'#}
        {#        , url: '/upload-invoice/'#}
        {#        , accept: 'file'#}
        {#        ,field :'test1'#}
        {#        ,data: {#}
        {#              'csrfmiddlewaretoken': function () {#}
        {#               return $(':input:first').val()#}
        {#               }#}
        {#         }#}
        {#        , multiple: true#}
        {#        , auto: false#}
        {#        , bindAction: '#test1'#}
        {#        , choose: function (obj) {#}
        {#            var files = this.files = obj.pushFile(); //将每次选择的文件追加到文件队列#}
        {#            //读取本地文件#}
        {#            obj.preview(function (index, file, result) {#}
        {#                var tr = $(['<tr id="upload-' + index + '">'#}
        {#                    , '<td>' + file.name + '</td>'#}
        {#                    , '<td>' + (file.size / 1014).toFixed(1) + 'kb</td>'#}
        {#                    , '<td>等待上传</td>'#}
        {#                    , '<td>'#}
        {#                    , '<button class="layui-btn layui-btn-xs demo-reload layui-hide">重传</button>'#}
        {#                    , '<button class="layui-btn layui-btn-xs layui-btn-danger demo-delete">删除</button>'#}
        {#                    , '</td>'#}
        {#                    , '</tr>'].join(''));#}
        {##}
        {#                //单个重传#}
        {#                tr.find('.demo-reload').on('click', function () {#}
        {#                    obj.upload(index, file);#}
        {#                });#}
        {##}
        {#                //删除#}
        {#                tr.find('.demo-delete').on('click', function () {#}
        {#                    delete files[index]; //删除对应的文件#}
        {#                    tr.remove();#}
        {#                    uploadListIns.config.elem.next()[0].value = ''; //清空 input file 值，以免删除后出现同名文件不可选#}
        {#                });#}
        {##}
        {#                demoListView.append(tr);#}
        {#            });#}
        {#        }#}
        {#        , done: function (res, index, upload) {#}
        {#            if (res.code == 0) { //上传成功#}
        {#                var tr = demoListView.find('tr#upload-' + index)#}
        {#                    , tds = tr.children();#}
        {#                tds.eq(2).html('<span style="color: #5FB878;">上传成功</span>');#}
        {#                tds.eq(3).html(''); //清空操作#}
        {#                return delete this.files[index]; //删除文件队列已经上传成功的文件#}
        {#            }#}
        {#            this.error(index, upload);#}
        {#        }#}
        {#        , error: function (index, upload) {#}
        {#            var tr = demoListView.find('tr#upload-' + index)#}
        {#                , tds = tr.children();#}
        {#            tds.eq(2).html('<span style="color: #FF5722;">上传失败</span>');#}
        {#            tds.eq(3).find('.demo-reload').removeClass('layui-hide'); //显示重传#}
        {#        }#}
        {#    });#}
        {##}
        //});


    </script>





    <script>
        window.onload = function () {
            var day2 = new Date();
            day2.setTime(day2.getTime());
            var s2 = day2.getFullYear() + "-" + (day2.getMonth() + 1) + "-" + day2.getDate();
            document.getElementById("timess").innerText = s2


        }

    </script>

{% endblock %}
